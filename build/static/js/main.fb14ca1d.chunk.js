(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t,n){},140:function(e,t,n){},320:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(30),s=n.n(a),i=(n(129),n(48)),u=n(6),o=n(73),l=n(49),p=(n(130),l.a.initializeApp({apiKey:"AIzaSyCQnJyL7o2RPvpQrOAodamnTaR6waJsyKY",authDomain:"react-chatengine.firebaseapp.com",projectId:"react-chatengine",storageBucket:"react-chatengine.appspot.com",messagingSenderId:"722981729499",appId:"1:722981729499:web:0ec33813aea85e373048fe"}).auth()),f=n(2),h=Object(r.createContext)(null),d=function(){return Object(r.useContext)(h)},b=function(e){var t=e.children,n=Object(u.f)(),c=Object(r.useState)(!0),a=Object(o.a)(c,2),s=(a[0],a[1]),i=Object(r.useState)(null),l=Object(o.a)(i,2),d=l[0],b=l[1];Object(r.useEffect)((function(){p.onAuthStateChanged((function(e){b(e),s(!1),e&&n.push("/chat")}))}),[d,n]);var j={user:d};return Object(f.jsx)(h.Provider,{value:j,children:t})},j=(n(140),n(9)),x=n.n(j),m=n(18),O=n(322),v=n.p+"static/media/auth.bf18cbdb.svg",g=n(74),w=n(5),y=n.n(w),N="9b2e9ebf-1580-452b-b6f7-fe0c2dbb2593",k="81f7c939-55f0-4fe9-b679-fb9a57c5ed6d",S="https://api.chatengine.io",C=function(){var e=Object(m.a)(x.a.mark((function e(t,n){var r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={"Project-ID":N,"User-Name":t,"User-Secret":n},e.prev=1,e.next=4,y.a.get("".concat(S,"/users/me"),{headers:Object(g.a)({},r)});case 4:return c=e.sent,console.log(c),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{error:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"private-key":k},e.prev=1,r=y.a.post("".concat(S,"/users/"),t,{headers:Object(g.a)({},n)}),e.abrupt("return",r);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",{error:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=d().user,t=function(){var e=Object(m.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.signInWithRedirect(new l.a.auth.GoogleAuthProvider);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"h-screen flex items-center flex-wrap justify-items-center w-screen",children:[Object(f.jsxs)("div",{className:"w-1/2 text-center",children:[Object(f.jsx)("img",{src:v,width:"500",alt:"",className:"mx-auto"}),Object(f.jsx)("h1",{className:"font-bold text-5xl mt-10",children:"Welcome to My Chat"})]}),Object(f.jsx)("div",{className:"w-1/2 px-20 bg-red-600 h-full flex  items-center justify-items-center",children:Object(f.jsxs)("div",{className:"flex flex-col items-center justify-items-center w-full  py-40 ",children:[Object(f.jsxs)("div",{onClick:function(){return t()},className:"bg-white p-5 rounded-lg flex items-center w-full text-center justify-center cursor-pointer hover:bg-red-200",children:[Object(f.jsx)(O.a,{})," ",Object(f.jsx)("span",{className:"ml-5",children:"Sign In with google"})]}),e&&Object(f.jsx)("div",{className:"mt-3 w-full",children:Object(f.jsxs)("div",{className:"inline-flex w-full items-center bg-white leading-none text-green-600 rounded-full p-2 shadow text-teal text-sm",children:[Object(f.jsx)("span",{className:"inline-flex bg-green-600 text-white rounded-full h-6 px-3 justify-center items-center",children:"Success"}),Object(f.jsx)("span",{className:"inline-flex px-2",children:"Login Successfull "})]})})]})})]})},P=n(123),F=function(){var e=Object(u.f)(),t=d().user;console.log(t),Object(r.useEffect)((function(){function n(){return(n=Object(m.a)(x.a.mark((function n(){var r,a;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",e.push("/"));case 2:return n.next=4,C(t.email,t.uid);case 4:if(!n.sent.error){n.next=18;break}if((r=new FormData).append("email",t.email),r.append("username",t.email),r.append("secret",t.uid),!t.photoURL){n.next=15;break}return n.next=13,c(t.photoURL);case 13:a=n.sent,r.append("avatar",a,a.name);case 15:return n.next=17,I(r);case 17:n.sent;case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){}}),[]);var n=function(){var t=Object(m.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.signOut();case 2:e.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var e=Object(m.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",new File([r],"userPhoto.png",{type:"image/png"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"flex bg-red-600 px-5 py-4 justify-between",children:[Object(f.jsx)("span",{className:"text-xl text-white font-bold",children:"Chats"})," ",Object(f.jsx)("span",{className:"cursor-pointer text-white font-bold",onClick:function(){return n()},children:"Logout"})]}),Object(f.jsx)("div",{className:"font-sans",children:Object(f.jsx)(P.d,{height:"calc(100vh - 60px )",publicKey:N,userName:t.email,userSecret:t.uid})})]}):Object(f.jsx)("div",{children:"Loading..."})};var A=function(){return Object(f.jsx)("div",{children:Object(f.jsx)(i.a,{children:Object(f.jsx)(b,{children:Object(f.jsxs)(u.c,{children:[Object(f.jsx)(u.a,{path:"/chat",component:F}),Object(f.jsx)(u.a,{path:"/",component:L})]})})})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,323)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root")),R()}},[[320,1,2]]]);
//# sourceMappingURL=main.fb14ca1d.chunk.js.map